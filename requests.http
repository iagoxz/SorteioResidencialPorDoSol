# Exemplos de RequisiÃ§Ãµes HTTP

## 1. Health Check
GET http://localhost:3000/health

###

## 2. Registrar Admin (primeiro usuÃ¡rio)
POST http://localhost:3000/api/auth/register
Content-Type: application/json

{
  "nome": "Admin",
  "cpf": "12345678900",
  "telefone": "11999999999",
  "email": "admin@example.com",
  "password": "senha123",
  "role": "admin"
}

###

## 3. Login Admin (copie o token)
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "senha123"
}

###

## 4. Criar Rifa (cole o token do admin)
POST http://localhost:3000/api/rifas
Authorization: Bearer COLE_SEU_TOKEN_AQUI
Content-Type: application/json

{
  "titulo": "Rifa Casa Residencial PÃ´r do Sol",
  "descricao": "Concorra a uma casa linda no Residencial PÃ´r do Sol",
  "preco": "50.00",
  "totalCotas": 1000,
  "dataSorteio": "2025-12-31T20:00:00Z"
}

###

## 5. Listar Rifas (pega o ID da rifa)
GET http://localhost:3000/api/rifas

###

## 6. Registrar Cliente
POST http://localhost:3000/api/auth/register
Content-Type: application/json

{
  "nome": "JoÃ£o Silva",
  "cpf": "98765432100",
  "telefone": "11988888888",
  "email": "joao@example.com",
  "password": "senha123",
  "role": "cliente"
}

###

## 7. Login Cliente (copie o token)
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "joao@example.com",
  "password": "senha123"
}

###

## 8. Ver cotas da rifa (substitua :id pelo ID da rifa)
GET http://localhost:3000/api/rifas/1/cotas

###

## 9. Reservar Cota (cole o token do cliente, substitua 1 pelo ID da rifa)
POST http://localhost:3000/api/rifas/1/reservar
Authorization: Bearer COLE_SEU_TOKEN_DO_CLIENTE_AQUI
Content-Type: application/json

{
  "numeroCota": 1
}

###

## 10. Comprar Cotas (cole o token do cliente, substitua 1 pelo ID da rifa)
POST http://localhost:3000/api/rifas/1/comprar
Authorization: Bearer COLE_SEU_TOKEN_DO_CLIENTE_AQUI
Content-Type: application/json

{
  "numerosCota": [1, 2, 3],
  "metodoPagamento": "pix"
}

###

## Listar UsuÃ¡rios (requer token de admin)
GET http://localhost:3000/api/users
Authorization: Bearer SEU_TOKEN_ADMIN

###

## Buscar UsuÃ¡rio por ID (requer token)
GET http://localhost:3000/api/users/UUID_DO_USUARIO
Authorization: Bearer SEU_TOKEN_ADMIN

###

## â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
## ğŸ’³ PAGAMENTOS COM PIX - MERCADO PAGO
## â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## 11. Criar Checkout PIX (gera QR Code)
POST http://localhost:3000/api/pagamentos/checkout
Authorization: Bearer COLE_SEU_TOKEN_DO_CLIENTE_AQUI
Content-Type: application/json

{
  "rifaId": 1,
  "numerosCota": [1, 2, 3],
  "metodoPagamento": "pix"
}

### Resposta esperada:
# {
#   "message": "Checkout criado com sucesso",
#   "data": {
#     "pagamentoId": 1,
#     "mpPaymentId": "123456789",
#     "status": "pending",
#     "qrCode": "00020126580014br.gov.bcb.pix...",
#     "pixPayload": "00020126580014br.gov.bcb.pix...",
#     "valor": 150.00,
#     "expiraEm": "2025-11-20T15:30:00.000Z",
#     "cotas": [1, 2, 3]
#   }
# }

###

## 12. Buscar Status do Pagamento
GET http://localhost:3000/api/pagamentos/1
Authorization: Bearer COLE_SEU_TOKEN_DO_CLIENTE_AQUI

###

## 13. Webhook do Mercado Pago (chamado automaticamente pelo MP)
# Esta rota Ã© pÃºblica e serÃ¡ chamada pelo Mercado Pago
# NÃ£o precisa testar manualmente
POST http://localhost:3000/api/pagamentos/webhook
Content-Type: application/json

{
  "action": "payment.updated",
  "api_version": "v1",
  "data": {
    "id": "123456789"
  },
  "date_created": "2025-11-20T14:00:00Z",
  "id": 12345,
  "live_mode": false,
  "type": "payment",
  "user_id": "123456"
}
